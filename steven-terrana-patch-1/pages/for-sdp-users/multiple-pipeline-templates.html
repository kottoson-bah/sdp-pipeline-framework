

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pipeline Templates &mdash; Solutions Delivery Platform  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/banner.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Notifiers" href="notifiers.html" />
    <link rel="prev" title="Jenkinsfile Variables" href="jenkinsfile-variables.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Solutions Delivery Platform
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Pipeline Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for-framework-devs/index.html">For Framework Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for-library-devs/index.html">For Library Developers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">For SDP Users</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="app-envs.html">Application Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="app-image-repo.html">Application Image Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="conditional-inheritance.html">Conditional Inheritance</a></li>
<li class="toctree-l2"><a class="reference internal" href="default-step-implementation.html">Default Step Implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="jenkinsfile-variables.html">Jenkinsfile Variables</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Pipeline Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="notifiers.html">Notifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdp-image-repo.html">SDP Pipeline Image Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="stages.html">Stages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/index.html">How-To’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute-to-docs.html">Contribute to the Docs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Solutions Delivery Platform</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">For SDP Users</a> &raquo;</li>
        
      <li>Pipeline Templates</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/pages/for-sdp-users/multiple-pipeline-templates.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  


    
    



    <p class="scv-banner scv-sphinx_rtd_theme"><a href="../../../master/pages/for-sdp-users/multiple-pipeline-templates.html"><b>Warning:</b> This document is for the development version of Solutions Delivery Platform. The main version is master.</a></p>
<div class="section" id="pipeline-templates">
<h1>Pipeline Templates<a class="headerlink" href="#pipeline-templates" title="Permalink to this headline">¶</a></h1>
<p>Pipeline templates (Jenkinsfiles) define the business logic of your pipeline. They’re responsible for
deciding what happens when and invoking the generic pipeline steps that need to be called.</p>
<p>This is where you’ll codify your software delivery process for your organization.</p>
<div class="section" id="defining-an-organizational-jenkinsfile">
<h2>Defining an Organizational Jenkinsfile<a class="headerlink" href="#defining-an-organizational-jenkinsfile" title="Permalink to this headline">¶</a></h2>
<p>SDP provides a <a class="reference external" href="https://github.com/boozallen/sdp-pipeline-framework/blob/master/resources/sdp/Jenkinsfile">default Jenkinsfile</a>.  If you wish to override this with your own, you can do so by
creating a <code class="docutils literal"><span class="pre">Jenkinsfile</span></code> in your organizational pipeline configuration repository located at
<code class="docutils literal"><span class="pre">/resources/sdp-org/Jenkinsfile</span></code>.</p>
<p>The presence of this file is all that’s required to override the default SDP pipeline.</p>
</div>
<div class="section" id="defining-additional-pipeline-templates">
<h2>Defining Additional Pipeline Templates<a class="headerlink" href="#defining-additional-pipeline-templates" title="Permalink to this headline">¶</a></h2>
<p>Sometimes a single pipeline template isn’t enough to meet your organization’s needs.</p>
<p>It should be possible to support any tech stack with a single pipeline template.  Use cases
for having multiple templates defined include:
* Pipeline template per branching strategy
* Pipeline template per type of workflow (Data, Infrastructure, Software)</p>
<p>To create multiple pipeline templates, create a directory called <code class="docutils literal"><span class="pre">pipeline_templates</span></code> in your pipeline
configuration repository under <code class="docutils literal"><span class="pre">/resources/sdp-org</span></code>.</p>
<p>Within this directory, any file can be referenced by tenants in their repository’s <code class="docutils literal"><span class="pre">pipeline_config.groovy</span></code> file.</p>
<p>For example, if my pipeline configuration repository contained:</p>
<div class="code groovy highlight-default"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">resources</span>
<span class="o">|---</span> <span class="n">sdp</span><span class="o">-</span><span class="n">org</span>
<span class="o">|------</span> <span class="n">Jenkinsfile</span>
<span class="o">|------</span> <span class="n">pipeline_templates</span>
<span class="o">|---------</span> <span class="n">data</span>
<span class="o">|---------</span> <span class="n">infrastructure</span>
</pre></div>
</div>
<p>where</p>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">Example Pipeline Templates</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">File</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/resources/sdp-org/Jenkinsfile</td>
<td>Software Pipeline Template</td>
</tr>
<tr class="row-odd"><td>/resources/sdp-org/pipeline_templates/data</td>
<td>Data Ingestion Pipeline Template</td>
</tr>
<tr class="row-even"><td>/resources/sdp-org/pipeline_templates/infrastructure</td>
<td>Infrastructure as Code Pipeline Template</td>
</tr>
</tbody>
</table>
<p>Then application development teams would not need to say anything in their configuration file, given that
the default organizational pipeline template is for software.</p>
<p>The data repositories would configure their pipeline templating by setting <code class="docutils literal"><span class="pre">pipeline_template</span></code> equal to path relative
to the <code class="docutils literal"><span class="pre">pipeline_templates</span></code> directory.</p>
<div class="code groovy highlight-default"><div class="highlight"><pre><span></span><span class="n">pipeline_template</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>
</pre></div>
</div>
<p>and the infrastructure teams would do the same:</p>
<div class="code groovy highlight-default"><div class="highlight"><pre><span></span><span class="n">pipeline_template</span> <span class="o">=</span> <span class="s2">&quot;infrastructure&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="tenants-bringing-their-own-jenkinsfiles">
<h2>Tenants Bringing Their Own Jenkinsfiles<a class="headerlink" href="#tenants-bringing-their-own-jenkinsfiles" title="Permalink to this headline">¶</a></h2>
<p>If an organization wants to leverage the reusability of SDP without needing
the governance of a centralized pipeline definition, they can allow tenants
to bring their own <code class="docutils literal"><span class="pre">Jenkinsfile</span></code> by setting:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">allow_tenant_jenkinsfile</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
<p>Tenants would then be able to define a <code class="docutils literal"><span class="pre">Jenkinsfile</span></code> at the root of their
repository.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="notifiers.html" class="btn btn-neutral float-right" title="Notifiers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="jenkinsfile-variables.html" class="btn btn-neutral" title="Jenkinsfile Variables" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Booz Allen Hamilton. All Rights Reserved. 
  This software package is licensed under the Booz Allen Public License. The license can be found in the License file or at http://boozallen.github.io/licenses/bapl.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: steven-terrana-patch-1
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../master/pages/for-sdp-users/multiple-pipeline-templates.html">master</a></dd>
            <dd><a href="../../../owasp-dep-check-lib/pages/for-sdp-users/multiple-pipeline-templates.html">owasp-dep-check-lib</a></dd>
            <dd><a href="multiple-pipeline-templates.html">steven-terrana-patch-1</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>